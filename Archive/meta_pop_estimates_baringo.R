#Compute total population per county (different demographic categories)
library(terra)   
ff <- list.files("C:/Users/wb562201/Downloads/meta_pop_raster", pattern = "\\.tif$", full=TRUE)
s <- rast(ff)

#Subcounty level
poly_subcounty <- vect("G:/My Drive/Dottorato UNIBA/Data/Rawdata/subcounties/subcounties_baringo.shp")
ex_subcounty <- extract(s, poly_subcounty, fun='sum', na.rm=TRUE)
dfr_subcounty <- data.frame(ex_subcounty)
write.csv(dfr_subcounty, file = "G:/My Drive/Dottorato UNIBA/Data/Rawdata/fb_popraster_estimates/pop_vars_subcounty_baringo.csv")

#Location level
poly_location <- vect("G:/My Drive/Dottorato UNIBA/Data/Rawdata/locations/locations_baringo.shp")
ex_location <- extract(s, poly_location, fun='sum', na.rm=TRUE)
dfr_location <- data.frame(ex_location)
write.csv(dfr_location, file = "G:/My Drive/Dottorato UNIBA/Data/Rawdata/fb_popraster_estimates/pop_vars_location_baringo.csv")
